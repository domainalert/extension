(()=>{"use strict";var e=function(e){chrome.notifications.create("",{title:"DomainAlert",message:e,iconUrl:"images/icon128.png",type:"basic"})};chrome.action.onClicked.addListener((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(n){var i=function(e){if(!e)return null;var n=new URL(e).hostname.split(".");return n.length>2?n.slice(-3).join("."):2===n.length?n.join("."):null}(n[0].url);(function(n){return chrome.storage.local.get({apikey:""}).then((function(i){if(!i.apikey&&i.apikey.length<10)throw e("Please specify an api key."),new Error("No api key found.");return fetch("https://domainalert.app/api/domains",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+i.apikey},body:JSON.stringify({domains:[n]})})}))})(i).then((function(){e("We will let you know once "+i+" is available for purchase!")}))}))}))})();
//# sourceMappingURL=background.js.map